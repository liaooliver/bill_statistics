{"version":3,"sources":["../node_modules/react-spinners/BounceLoader.js","pages/Import.jsx"],"names":["__makeTemplateObject","this","cooked","raw","Object","defineProperty","value","__extends","extendStatics","d","b","setPrototypeOf","__proto__","Array","p","prototype","hasOwnProperty","call","__","constructor","create","__createBinding","o","m","k","k2","undefined","enumerable","get","__setModuleDefault","v","__importStar","mod","__esModule","result","exports","templateObject_1","templateObject_2","templateObject_3","React","require","core_1","helpers_1","bounce","keyframes","Loader","_super","_this","apply","arguments","style","i","_a","props","color","size","css","cssValue","defaultProps","wrapper","render","loading","jsx","sizeDefaults","PureComponent","default","Import","postBillFile","useContext","BillListContext","useState","isFileIn","setIsFileIn","uploading","setUploading","success","setSuccess","fail","setFail","handleDrop","e","a","triggerAPI","nativeEvent","dataTransfer","files","preventDefault","stopPropagation","resetState","then","response","message","sessionStorage","removeItem","className","onDrop","onDragOver","handleDragOver","onDragEnter","handleDragEnter","onDragLeave","handleDragLeave","stroke","fill","viewBox","aria-hidden","strokeWidth","strokeLinecap","strokeLinejoin","htmlFor","id","name","type","onChange","target"],"mappings":"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","file":"static/js/9.f500a819.chunk.js","sourcesContent":["\"use strict\";\nvar __makeTemplateObject = (this && this.__makeTemplateObject) || function (cooked, raw) {\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n    return cooked;\n};\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/** @jsx jsx */\nvar React = __importStar(require(\"react\"));\nvar core_1 = require(\"@emotion/core\");\nvar helpers_1 = require(\"./helpers\");\nvar bounce = core_1.keyframes(templateObject_1 || (templateObject_1 = __makeTemplateObject([\"\\n  0%, 100% {transform: scale(0)}\\n  50% {transform: scale(1.0)}\\n\"], [\"\\n  0%, 100% {transform: scale(0)}\\n  50% {transform: scale(1.0)}\\n\"])));\nvar Loader = /** @class */ (function (_super) {\n    __extends(Loader, _super);\n    function Loader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.style = function (i) {\n            var _a = _this.props, color = _a.color, size = _a.size;\n            return core_1.css(templateObject_2 || (templateObject_2 = __makeTemplateObject([\"\\n      position: absolute;\\n      height: \", \";\\n      width: \", \";\\n      background-color: \", \";\\n      border-radius: 100%;\\n      opacity: 0.6;\\n      top: 0;\\n      left: 0;\\n      animation-fill-mode: both;\\n      animation: \", \" 2.1s \", \" infinite ease-in-out;\\n    \"], [\"\\n      position: absolute;\\n      height: \", \";\\n      width: \", \";\\n      background-color: \", \";\\n      border-radius: 100%;\\n      opacity: 0.6;\\n      top: 0;\\n      left: 0;\\n      animation-fill-mode: both;\\n      animation: \", \" 2.1s \", \" infinite ease-in-out;\\n    \"])), helpers_1.cssValue(size || Loader.defaultProps.size), helpers_1.cssValue(size || Loader.defaultProps.size), color || Loader.defaultProps.color, bounce, i === 1 ? \"1s\" : \"0s\");\n        };\n        _this.wrapper = function () {\n            var size = _this.props.size;\n            return core_1.css(templateObject_3 || (templateObject_3 = __makeTemplateObject([\"\\n      position: relative;\\n      width: \", \";\\n      height: \", \";\\n    \"], [\"\\n      position: relative;\\n      width: \", \";\\n      height: \", \";\\n    \"])), helpers_1.cssValue(size || Loader.defaultProps.size), helpers_1.cssValue(size || Loader.defaultProps.size));\n        };\n        return _this;\n    }\n    Loader.prototype.render = function () {\n        var _a = this.props, loading = _a.loading, css = _a.css;\n        return loading ? (core_1.jsx(\"span\", { css: [this.wrapper(), css] },\n            core_1.jsx(\"span\", { css: this.style(1) }),\n            core_1.jsx(\"span\", { css: this.style(2) }))) : null;\n    };\n    Loader.defaultProps = helpers_1.sizeDefaults(60);\n    return Loader;\n}(React.PureComponent));\nexports.default = Loader;\nvar templateObject_1, templateObject_2, templateObject_3;\n","import React, { useState, useContext } from 'react';\nimport { BillListContext } from '../context/BillListContext';\nimport BounceLoader from \"react-spinners/BounceLoader\";\n\nconst Import = () => {\n\n    const { postBillFile } = useContext(BillListContext)\n    const [isFileIn, setIsFileIn] = useState(false)\n    const [uploading, setUploading] = useState(false)\n    const [success, setSuccess] = useState(false)\n    const [fail, setFail] = useState(false)\n\n    // 1. listen Drag & Drop event for change input style (border dash color)\n    const handleDragEnter = e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsFileIn(true)\n    };\n    const handleDragLeave = e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsFileIn(false)\n    };\n    const handleDragOver = e => {\n        e.preventDefault();\n        e.stopPropagation();\n        setIsFileIn(true)\n    };\n    // 2. listen input change event & Drop event \n    const handleDrop = async (e) => {\n        triggerAPI(e, e.nativeEvent.dataTransfer.files[0])\n    };\n    const change = (e) => {\n        triggerAPI(e, e.nativeEvent.target.files[0])\n    }\n    // reuse post logic\n    const triggerAPI = async (e, files) => {\n        e.preventDefault();\n        e.stopPropagation();\n           \n        resetState()\n\n        postBillFile(files).then(response => {\n            const { message } = response;\n            setUploading(false)\n            if (message === 'success') {\n                setSuccess(true)\n                sessionStorage.removeItem('StatisticsData')\n            } else {\n                setFail(true)\n            }\n        })\n        \n    }\n    const resetState = () => {\n        setIsFileIn(false)\n        setUploading(true)\n        setSuccess(false)\n        setFail(false)\n    }\n\n    return (\n        <div className=\"max-w-4xl mx-auto py-6 sm:px-6 lg:px-8\">\n            <div className=\"px-4 sm:px-0\">\n\n                <div className=\"mb-24\">\n                    <form\n                        onDrop={e => handleDrop(e)}\n                        onDragOver={e => handleDragOver(e)}\n                        onDragEnter={e => handleDragEnter(e)}\n                        onDragLeave={e => handleDragLeave(e)}\n                        className={`${isFileIn ? \"border-gray-600\" : \"\"} mt-2 flex justify-center px-6 pt-5 pb-6 border-2 border-gray-300 border-dashed rounded-md relative`}\n                    >\n                        {\n                            uploading && <div className=\"absolute inset-0 rounded-md z-10\">\n                                <div className=\"w-full h-full bg-gray-200 opacity-50\"></div>\n                                <div className=\"absolute top-0 w-full h-full flex justify-center items-center flex-col z-20\">\n                                    <BounceLoader />\n                                    <span className=\"font-extrabold badge-red w-auto text-base\">上傳中</span>\n                                </div>\n                            </div>\n                        }\n\n                        <div className=\"space-y-1 text-center\">\n                            <svg className=\"mx-auto h-12 w-12 text-gray-400\" stroke=\"currentColor\" fill=\"none\" viewBox=\"0 0 48 48\" aria-hidden=\"true\">\n                                <path d=\"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02\" strokeWidth=\"2\" strokeLinecap=\"round\" strokeLinejoin=\"round\" />\n                            </svg>\n                            <div className=\"flex text-sm text-gray-600\">\n                                <label\n                                    htmlFor=\"file-upload\"\n                                    className=\"relative cursor-pointer bg-white rounded-md font-medium text-indigo-600 hover:text-indigo-500 focus-within:outline-none focus-within:ring-2 focus-within:ring-offset-2 focus-within:ring-indigo-500\"\n                                >\n                                    <span>Upload a file</span>\n                                    <input id=\"file-upload\" name=\"file-upload\" type=\"file\" onChange={change} className=\"sr-only\" />\n                                </label>\n                                <p className=\"pl-1\">or drag and drop</p>\n                            </div>\n                            <p className=\"text-xs text-gray-500\">Excel xlsx</p>\n                        </div>\n                    </form>\n\n                    {success && <span className=\"badge-green w-auto\">上傳成功</span>}\n                    {fail && <span className=\"badge-red w-auto\">上傳失敗</span>}\n                    <p className=\"font-medium text-xs text-red-400\">*目前僅接受由台新數位銀行 Richart 所匯出的信用卡帳單 excel 檔案。</p>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Import;"],"sourceRoot":""}