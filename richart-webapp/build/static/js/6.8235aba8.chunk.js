(this["webpackJsonprichart-webapp"]=this["webpackJsonprichart-webapp"]||[]).push([[6],{122:function(e,t,a){"use strict";a(1);var c=a(123),r=a.n(c),n=a(0);t.a=function(){return Object(n.jsx)("div",{className:"flex justify-center my-3",children:Object(n.jsx)(r.a,{color:"rgba(59, 130, 246, 1)"})})}},370:function(e,t,a){"use strict";a.r(t);var c=a(3),r=a(1),n=a(4),s=a(80),l=a(0),i=function(e){var t=e.category;return Object(l.jsxs)("div",{className:"grid grid-cols-3 gap-3 md:gap-6",children:[Object(l.jsxs)("div",{className:"col-span-full md:col-span-1 md:mb-0 p-3 pb-5 bg-blue-500 text-white rounded",children:[Object(l.jsx)("span",{className:"text-xs font-semibold",children:"\u7e3d\u5237\u5361\u91d1\u984d(\u8abf\u6574\u524d)"}),Object(l.jsx)("h4",{className:"text-center text-4xl font-extrabold",children:Object(s.a)(t.accumulatedCost)})]}),Object(l.jsxs)("div",{className:"col-span-full md:col-span-1 md:mb-0 p-3 pb-5 bg-yellow-500 text-white rounded",children:[Object(l.jsx)("span",{className:"text-xs font-semibold",children:"\u7e3d\u5237\u5361\u91d1\u984d(\u8abf\u6574\u5f8c)"}),Object(l.jsx)("h4",{className:"text-center text-4xl font-extrabold",children:Object(s.a)(t.accumulatedRealCost)})]}),Object(l.jsx)("div",{className:"col-span-full md:col-span-1 md:mb-0 p-3 pb-5 bg-gray-600 rounded"})]})},d=a(48),b=a(71),o=function(e){var t=e.categories;return Object(l.jsxs)("div",{className:"p-3 border rounded shadow md:sticky md:top-4",children:[Object(l.jsx)("div",{className:"flex mb-3",children:Object(l.jsx)("h5",{className:"flex-grow",children:"\u5e33\u55ae\u5206\u985e"})}),Object(l.jsx)("ul",{className:"flex flex-wrap",children:t&&b.b&&t.value.map((function(e){return Object(l.jsxs)("li",{className:"mb-2 w-1/2 md:w-full",children:[Object(l.jsx)("span",{className:"".concat(b.b[e.category]),children:e.category}),Object(l.jsx)("span",{className:"ml-3",children:Object(s.a)(e.by_spend)})]},Object(d.a)())}))})]})},j=a(374),u=a(360),m=a(365),x=a(343),h=a(344),p=a(358),O=a(359),f=a(182),y=function(e){var t=e.dataSet,a=(e.title,e.dataKey),c=e.name,r=e.barSize,n=e.colorType;return Object(l.jsx)(j.a,{children:Object(l.jsxs)(u.a,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[Object(l.jsx)(m.a,{strokeDasharray:"3 3"}),Object(l.jsx)(x.a,{dataKey:"category"}),Object(l.jsx)(h.a,{}),Object(l.jsx)(p.a,{}),a.map((function(e,a){return console.log(e,a),Object(l.jsx)(O.a,{name:c[a],dataKey:e,fill:"#1e90ff",barSize:r,children:t.map((function(e,t){return Object(l.jsx)(f.a,{fill:"bar"===n?b.c.bar[a]:b.c.bar_scatter[a]},"cell-".concat(t))}))},Object(d.a)())}))]})})},g=a(372),v=a(345),N=function(e){var t=e.dataSet;return Object(l.jsx)(j.a,{children:Object(l.jsxs)(g.a,{children:[Object(l.jsx)(v.a,{nameKey:"category",dataKey:"by_percentage",isAnimationActive:!1,data:t,cx:"50%",cy:"50%",outerRadius:120,fill:"#8884d8",label:!0,children:t.map((function(e,t){return Object(l.jsx)(f.a,{fill:b.a[e.category]},"cell-".concat(t))}))}),Object(l.jsx)(p.a,{})]})})},w=function(e){var t=e.value;return Object(l.jsxs)("table",{className:"rounded-t-lg m-5 w-5/6 mx-auto bg-gray-200 text-gray-800",children:[Object(l.jsx)("thead",{children:Object(l.jsxs)("tr",{className:"text-left border-b-2 border-gray-300",children:[Object(l.jsx)("th",{className:"px-4 py-3",children:"\u985e\u5225"}),Object(l.jsx)("th",{className:"px-4 py-3",children:"\u767e\u5206\u6bd4"})]})}),Object(l.jsx)("tbody",{children:t.map((function(e,t){return Object(l.jsxs)("tr",{className:"bg-gray-100 border-b border-gray-200",children:[Object(l.jsxs)("td",{className:"flex items-center px-4 py-3",children:[Object(l.jsx)("span",{className:"w-4 h-4 rounded-full inline-block mr-2",style:{background:"".concat(b.a[e.category])}}),e.category]}),Object(l.jsx)("td",{className:"px-4 py-3 font-semibold",children:e.by_percentage})]},Object(d.a)())}))})]})},S=function(e){var t=e.monthly,a=e.category,c=e.scattered;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{className:"mb-3",children:Object(l.jsxs)("span",{className:"badge-yellow w-auto",children:["\u7d71\u8a08\u671f\u9593 ",a.begin," ~ ",a.last]})}),Object(l.jsx)(i,{category:a}),Object(l.jsxs)("div",{className:"md:grid grid-cols-4 row gap-4 mt-3",children:[Object(l.jsx)("div",{className:"col-span-full md:col-span-1 md:row-span-3 relative md:mb-0 mb-4",children:a&&Object(l.jsx)(o,{categories:a})}),Object(l.jsx)("div",{className:"col-span-full md:col-span-3 md:mb-0 mb-4",children:t&&Object(l.jsxs)("div",{className:"p-3 border rounded shadow",children:[Object(l.jsx)("h4",{className:"text-center mb-3",children:"\u55ae\u65e5\u6d88\u8cbb\u5206\u4f48"}),Object(l.jsx)("div",{style:{width:"100%",height:400},children:Object(l.jsx)(y,{dataSet:c,barSize:10,dataKey:["billSpend","adjustSpend"],name:["\u8abf\u6574\u524d $","\u8abf\u6574\u5f8c $"],colorType:"bar_scatter"})})]})}),Object(l.jsx)("div",{className:"col-span-full md:col-span-3 md:mb-0 mb-4",children:t&&Object(l.jsxs)("div",{className:"p-3 border rounded shadow",children:[Object(l.jsx)("h4",{className:"text-center mb-3",children:"\u5404\u6708\u4efd\u6d88\u8cbb\u7e3d\u984d"}),Object(l.jsx)("div",{style:{width:"100%",height:400},children:Object(l.jsx)(y,{dataSet:t,barSize:15,dataKey:["spend","realSpend"],name:["\u8abf\u6574\u524d $","\u8abf\u6574\u5f8c $"],colorType:"bar"})})]})}),Object(l.jsx)("div",{className:"col-span-full md:col-span-3",children:a&&Object(l.jsxs)("div",{className:"p-3 border rounded shadow",children:[Object(l.jsx)("h4",{className:"text-center mb-3",children:"\u6d88\u8cbb\u7e3d\u984d\u6bd4\u4f8b"}),Object(l.jsx)("div",{style:{width:"100%",height:400},children:Object(l.jsx)(N,{dataSet:a.value})}),Object(l.jsx)(w,{value:a.value})]})})]})]})},F=a(122),_=a(2),k=a.n(_),B=a(6),C=Object(r.createContext)(),D=function(e){var t=e.children,a=function(){var e=Object(B.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("subsidiaryLedger/filter_by_category").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=Object(B.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("subsidiaryLedger/filter_by_monthly").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),r=function(){var e=Object(B.a)(k.a.mark((function e(t,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("subsidiaryLedger/scattered_monthly?year=".concat(t,"&month=").concat(a)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return Object(l.jsx)(C.Provider,{value:{getFilterByCategory:a,getFilterByMonthly:c,scatteredBymonthly:r},children:t})},A=function(e){var t=e.haveData,a=e.scattered,c=e.monthly,r=e.category;return Object(l.jsx)(l.Fragment,{children:t?Object(l.jsx)(S,{scattered:a,monthly:c,category:r}):Object(l.jsx)("div",{className:"font-bold text-center text-md text-red-600 mb-3",children:"Oops! \u7121\u8cc7\u6599\uff01\u8acb\u5148\u4e0a\u50b3\u6a94\u6848"})})},K=function(){var e=Object(r.useContext)(C),t=e.getFilterByCategory,a=e.getFilterByMonthly,s=e.scatteredBymonthly,i=Object(r.useState)(),d=Object(c.a)(i,2),b=d[0],o=d[1],j=Object(r.useState)(),u=Object(c.a)(j,2),m=u[0],x=u[1],h=Object(r.useState)(!1),p=Object(c.a)(h,2),O=p[0],f=p[1],y=Object(r.useState)(),g=Object(c.a)(y,2),v=g[0],N=g[1],w=Object(r.useState)(!0),S=Object(c.a)(w,2),_=S[0],k=S[1],B=Object(n.g)();return Object(r.useEffect)((function(){var e=t,c=a,r=s,n=JSON.parse(sessionStorage.getItem("StatisticsData"));n?(o(n[0]),x(n[1]),N(n[2]),f(!0)):Promise.all([e(),c(),r()]).then((function(e){e.every((function(e){return 0!==e.length}))?(o(e[0]),x(e[1]),N(e[2]),k(!0),f(!0),sessionStorage.setItem("StatisticsData",JSON.stringify(e))):(k(!1),f(!0))})).catch((function(e){return B.push("/500")}))}),[]),Object(l.jsx)(l.Fragment,{children:O?Object(l.jsx)(A,{haveData:_,scattered:v,monthly:m,category:b}):Object(l.jsx)(F.a,{})})};t.default=function(){return Object(l.jsx)(D,{children:Object(l.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:Object(l.jsx)("div",{className:"px-4 sm:px-0",children:Object(l.jsx)(K,{})})})})}},71:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return r})),a.d(t,"c",(function(){return n}));var c={"\u5403\u98ef":"badge-red","\u4ea4\u901a":"badge-yellow","\u6350\u6b3e":"badge-blue","3C":"badge-green","\u8863\u670d":"badge-indigo","\u5a1b\u6a02":"badge-purple","\u65c5\u904a":"badge-pink","\u96fb\u8a71":"badge-gray","\u9032\u4fee":"badge-red","\u5176\u4ed6":"badge-green"},r={"\u5403\u98ef":"#F87171","\u4ea4\u901a":"#FBBF24","\u6350\u6b3e":"#60A5FA","3C":"#34D399","\u8863\u670d":"#818CF8","\u5a1b\u6a02":"#A78BFA","\u65c5\u904a":"#F472B6","\u96fb\u8a71":"#9CA3AF","\u9032\u4fee":"#F87171","\u5176\u4ed6":"#34D399"},n={bar_scatter:["#3b82f6","#f59e0b"],bar:["#3b82f6","#F87171"]}},80:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var c=function(e){var t=e;if(void 0!==t){"string"===typeof e&&(t=-1*Number(t.replace(/[,]+/g,"")));return new Intl.NumberFormat("zh-TW",{style:"currency",currency:"TWD",minimumFractionDigits:0}).format(t)}}}}]);
//# sourceMappingURL=6.8235aba8.chunk.js.map